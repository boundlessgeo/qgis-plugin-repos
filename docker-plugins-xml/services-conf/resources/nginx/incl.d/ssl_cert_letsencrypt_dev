ssl_session_cache   shared:SSL:10m;
ssl_session_timeout 10m;

# OLD config (pre-2017-07-11)
# ciphers and protocols to meet PCI compliance (no SSLv2 or v3, etc)
#ssl_prefer_server_ciphers on;
#ssl_protocols TLSv1.1 TLSv1.2;
#ssl_ciphers HIGH:!aNULL:!MD5;
#ssl_ciphers HIGH:MEDIUM:!SSLv2:!ADH:!aNULL:!eNULL:!NULL;

ssl_certificate /etc/letsencrypt/live/domain-tld-dev/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/domain-tld-dev/privkey.pem;



# see https://github.com/orangejulius/https-on-nxinx for updates

# support only known-secure cryptographic protocols
# SSLv3 is broken by POODLE as of October 2014
# also, ciphers and protocols to meet PCI compliance (no SSLv2 or v3, etc)
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;

# make the server choose the best cipher instead of the browser
# PFS is frequently compromised without this
ssl_prefer_server_ciphers on;

# support only believed secure ciphersuites using the following priority:
# 1.) prefer PFS enabled ciphers
# 2.) prefer AES128 over AES256 for speed (AES128 has completely adequate security for now)
# 3.) Support DES3 for IE8 support
#
# disable the following ciphersuites completely
# 1.) null ciphers
# 2.) ciphers with low security
# 3.) fixed ECDH cipher (does not allow for PFS)
# 4.) known vulnerable cypers (MD5, RC4, etc)
# 5.) little-used ciphers (Camellia, Seed)
ssl_ciphers 'kEECDH+ECDSA+AES128 kEECDH+ECDSA+AES256 kEECDH+AES128 kEECDH+AES256 kEDH+AES128 kEDH+AES256 DES-CBC3-SHA +SHA !aNULL !eNULL !LOW !kECDH !DSS !MD5 !RC4 !EXP !PSK !SRP !CAMELLIA !SEED';

# Use 2048 bit Diffie-Hellman RSA key parameters
# (otherwise Nginx defaults to 1024 bit, lowering the strength of encryption # when using PFS)
# Generated by OpenSSL with the following command:
# openssl dhparam -outform pem -out /etc/nginx/ssl/dhparam2048.pem 2048
ssl_dhparam /etc/nginx-no-overlay/ssl/dhparam2048.pem;
